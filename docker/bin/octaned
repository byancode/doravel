#!/bin/bash

source /root/.bashrc

source $(get_env_file $APP_ENV)

echo $$ > /var/run/octaned.pid

cleanup() {
    rm -f /var/run/octaned.pid
    exit 0;
}

trap cleanup SIGTERM
trap cleanup SIGQUIT
trap cleanup EXIT

OCTANE_SERVER=${OCTANE_SERVER:-"swoole"}
OCTANE_OPTIONS=${OCTANE_OPTIONS:-""}

artisan octane:start --server=$OCTANE_SERVER $@ $OCTANE_OPTIONS
