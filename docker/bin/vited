#!/bin/bash

cleanup() {
    exit 0;
}

trap cleanup SIGQUIT
trap cleanup SIGTERM
trap cleanup EXIT

if [ ! -d node_modules ]; then
    echo "Instalando dependencias de Node.js"
    npm install
fi

source $(get_env_file $APP_ENV)

VITE_HOST=${VITE_HOST:-localhost}
VITE_PORT=${VITE_PORT:-5173}

/usr/local/bin/npx vite dev --host $VITE_HOST --port $VITE_PORT --strictPort